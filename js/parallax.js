function fullscreenFix(){var a=$("body").height();$(".content-b").each(function(i){$(this).innerHeight()>a&&$(this).closest(".fullscreen").addClass("overflow")})}function backgroundResize(){var a=$(window).height();$(".parallax-bg").each(function(i){var t=$(this),e=t.width(),s=t.height(),o=t.attr("data-img-width"),n=t.attr("data-img-height"),r=o/n,l=parseFloat(t.attr("data-diff"));l=l||0;var c=0;if(t.hasClass("parallax")&&!$("html").hasClass("touch")){c=a-s}e>(o=(n=s+c+l)*r)&&(n=(o=e)/r),t.data("resized-imgW",o),t.data("resized-imgH",n),t.css("background-size",o+"px "+n+"px")})}function parallaxPosition(a){var i=$(window).height(),t=$(window).scrollTop(),e=t+i,s=(t+e)/2;$(".parallax").each(function(a){var o=$(this),n=o.height(),r=o.offset().top,l=r+n;if(e>r&&t<l){o.data("resized-imgW");var c=o.data("resized-imgH"),d=n<i?c-n:c-i,h=0+(-c+i-0)*(s-(r-=d))/((l+=d)-r),u=o.attr("data-oriz-pos");u=u||"50%",$(this).css("background-position",u+" "+h+"px")}})}"ontouchstart"in window&&(document.documentElement.className=document.documentElement.className+" touch"),$("html").hasClass("touch")||$(".parallax").css("background-attachment","fixed"),$(window).resize(fullscreenFix),fullscreenFix(),$(window).resize(backgroundResize),$(window).focus(backgroundResize),backgroundResize(),$("html").hasClass("touch")||($(window).resize(parallaxPosition),$(window).scroll(parallaxPosition),parallaxPosition());